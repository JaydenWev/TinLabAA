%Groeps verslag van TinLab AA
\documentclass{article}
\usepackage{graphicx} 
\usepackage[dutch]{babel}
\usepackage{verbatim} % for multi line comments
\usepackage{xcolor}

\begin{document}
\graphicspath{{../Images/}}
\sffamily
\begin{titlepage}
  \centering
    \vfill
    {\bfseries\Huge
      Verslag Tinlab Advanced Algorithms \\
        \vskip2cm
      }
      {\bfseries\Large
        A. J. Ruigrok \& J. I. Weverink\\
      }
      {
        \bfseries\normalsize
        176-671\\
        \vskip1cm
        \today\\
    }
    \vfill
    \includegraphics[width=4cm]{logohr.png} % also works with logo.pdf
    \vfill
    \vfill
\end{titlepage}
\newpage
\tableofcontents

\clearpage %====================================================================
\section{Inleiding}
Nadat er een grondige analyse van het Nederlandse sluizen park is uitgevoerd is gebleken dat een renovatie van een groot aantal sluizen noodzakelijk is. Uit een eerste verkenning is gebleken dat renoveren en tegelijkertijd automatiseren een voordeel kan opleveren. Zo kun je duidelijke verbetering zien in de veiligheid, efficiëntie, capaciteit, onderhoudskosten en duurzaamheid.

Met oog op het onlangs afgesloten klimaatakkoord, en de doelen die behaald moeten worden, heeft de Nederlandse overheid besloten om over te gaan op ingrijpende renovaties van verschillende soorten sluizen. Op het ministerie van infrastructuur en waterstaat mist alleen wel de nodige kennis van ICT en systemen.

Zodoende is aan ons gevraagd een model (of een onderling samenhangend aantal modellen) aan te leveren. Dit kan dan gebruikt worden om verschillende, geautomatiseerde sluizen te realiseren.

Zie hier een referentie naar latex Companion~\cite{latexcompanion} en nog een naar Einstein~\cite{einstein}\ldots 

\clearpage %====================================================================
\section{Doelstelling}
Er zijn een hoop verschillende soorten sluizen in Nederland, aangezien wij de tijd en middelen hebben voor een enkel type sluis hebben wij de keuze laten vallen op een schutsluis. Dit type sluis is bedoelt om schepen op een hoger of lager water niveau te brengen. Je kunt dit ook wel omschrijven als een waterlift of een botenlift [BRON].

Voor de sluis zal gekeken moeten worden welke stappen er genomen worden en welke hiervan door een persoon gedaan. Omdat wij gevraagd zijn voor het automatiseren van een sluis, zullen we dus moeten kijken naar het vervangen van de handeling van een persoon.

Ook kan er door de automatisering het proces geoptimaliseerd worden, en dus efficiënter gemaakt worden. Er moet dus gekeken worden naar hoe het proces het beste kan worden ontworpen om optimaal van de tijd gebruik te maken. Wel moet rekening gehouden worden met de energie die het kost. Een minimale tijdswinst is een grote energie stijging niet waard. Hier zal zowaar nodig een afweging gemaakt moeten worden.

Door het menselijke toedoen te schrappen kan de veiligheid ook verbeterd worden. Mensen kunnen door verschillende factoren een fout maken of het nu hun schuld is of niet. Machines zijn natuurlijk niet uitgesloten van ‘fouten’. Het is dus belangrijk om te vinden welke mogelijke nieuwe veiligheidsrisico’s erbij komen en dit te vergelijken met de veiligheidsrisico’s die verdwijnen.


\clearpage %====================================================================
\section{Literatuur onderzoek} %resultaten literatuur onderzoek

\subsection{Veiligheid}
Om ervoor te zorgen dat een sluis veilig gebruikt kan worden. Moeten er een aantal veiligheids 
Aan welke veiligheids eigenschappen moet een sluis zich voldoen
De kamer moet goed afgesloten zijn (waterdicht).
\begin{itemize}
\item Het water niveau moet worden gemonitoord.
\item Hoeveel water in \& hoeveel water uit gaat.
\end{itemize}

\subsubsection{Deuren}
De deuren zijn erg van belang bij een sluis. Ze zorgen ervoor dat de boten door de sluis kunnen komen en zijn krachtig genoeg om het water buiten de sluis te houden op moment van het schutten. De deuren zijn daarom de krachtigste en een van de belangrijkste onderdelen van de sluis, maar ze moeten dan ook nog correct werken.
\\\\
De deuren mogen bijvoorbeeld niet tegelijk openstaan. Dit zorgt voor vrije strooming van het water tussen de twee voormalig gescheidde gebieden. Dit kan zorgen voor grote problemen, afhankelijk van de type deur.\\
Ook moet één deur pas opengaan als het water niveau van de sluis, op gelijke hoogte is met het waterniveau dat zich buiten de deur bevindt. Als dit niet het geval is dan kunnen de vaartuigen in de sluis onbedoeld en onvoorzien in beweging komen.

% Richtlijnen Vaarwegen 2017
% https://waterrecreatienederland.nl/content/uploads/2018/04/richtlijnen-vaarwegen-2017.pdf

\subsubsection{Invloed van wind} % pagina 70
Wind kan ervoor zorgen dat boten onbedoeld in beweging worden gebracht. In de huidige tijd kunnen we ervan uitgaan dat de meeste beroepsschepen over een boegschroef  met voldoende vermogen beschikken. De schepen kunnen d.m.v de boegschroef de werking van de wind compenseren. Tevens is het de taak van de schipper om de werking van de wind te anticiperen. De schipper moet het schip op zijn plek houden zodra de sluis wordt benadert of gedurende het gebruik van de sluis.

Vanuit het \textit{Richtlijnen Vaarwegen 2017} verslag van Rijkswaterstaat \cite{rijkswaterstaat2017} kan worden vernomen dat er geen rekening gehouden hoefd te worden met windkrachten in het model. De verantwoordelijkheid om hiermee juist te handelen wordt bij de schipper gelegd. Dit is dan ook een menselijke handeling en is niet realistisch om te kunnen modelleren.

\vskip0.5cm

\subsubsection{Vorming van ijs}
Ijsvorming kan een probleem vormen voor een sluis. Ijs kan ervoor zorgen dat de deuren niet meer goed functioneren. Elk type deur heeft zijn eigen gevoeligheden:
\begin{itemize}
\item Puntdeuren zijn gevoelig voor ijsvorming en ophoping in en direct voor de deurkassen. Dit zorgt ervoor dat de deuren niet open kunnen gaan.
\item Enkel draaideuren zijn ook gevoelig voor ijsvorming voor en ophoping in en direct voor de deurkassen.
\item Roldeuren kunnen vastlopen in drijvend ijs, dat zich ophoopt. Dit kan leiden tot vastvriezen.
\item Hefdeuren zijn gevoelig voor aanhechting van ijs. Aangehecht ijs kan op onderdoorvarende schepen kan vallen. Ook kan de deur klemlopen of dusdanig zwaar maken dat de deur te zwaar wordt om te heffen.
\end{itemize}

Er zijn natuurlijk ook middelen om de sluis ijsvrij te maken. Deze middelen zijn: luchtbellenscherm, kasblaasinstallatie, verwaringselementen of een gesloten constructie.

\vskip0.5cm

\section{\large\color{red}\textbf{KEUZE MAKEN WEL OF NIET MODELLEREN}}

\subsection{Capaciteit}
Onder sluis capaciteit wordt verstaan de hoeveelheid schepen er tegelijk geschut kunnen worden.

Wat is de capaciteit van een sluis? Hoeveelheid water wat kan worden geaccepteerd en overpomp snelheid.\\
In de kamer moet minimaal ruimte zijn voor een plezier boot ca.10m, maar dit is niet relevant voor het modelleren.

\clearpage

\section{Requirements} %Requirements van het te bouwen systeem
Het literatuur onderzoek kan gebruikt worden om requirements op te stelling. Om binnen de scope van het modelleren te blijven zullen hier alleen requirements genoemd worden met betrekking tot software. De requirements zijn als volgt:
\begin{itemize}



\item De deuren mogen niet op het zelfde moment open kunnen staan. Dat er geen enkele situatie kan voorkomen dat dit het geval is moet geverifieerd worden.
\item Een deur mag pas geopend worden als de waterhoogte binnen gelijk is aan de waterhoogte buiten.
\item Er moet een rij gemodelleerd worden, wat de wachtende schepen moet voorstellen.
\item De waterhoogte moet bijgehouden worden, dit geldt voor de hoge zijde van de rivier, de lage zijde van de rivier en het compartiment van de sluis.
\item Er dient een oplossing toegevoegd te worden voor wanneer de temperatuur beneden het vriespunt daalt.
\item Er is een stoplicht nodig wat aangeeft wanneer een boot de sluis binnen mag varen. Dit betreft een stoplicht aan de bovenzijde en de onderzijde. Daarnaast is er een stoplicht nodig die aangeeft wanneer een boot de sluis weer mag verlaten.

\begin{description}
\item o Een stoplicht mag alleen op groen als de deur open staat.

\item o Het stoplicht binnen de sluis gaat pas weer op rood als alle boten de sluis volledig hebben verlaten.

\item o De buiten stoplichten kunnen pas op groen als het stoplicht binnen in de sluis op rood staat.
\end{description}
\end{itemize}

\section{Specificaties} %Specificaties van het te bouwen systeem

\begin{itemize}


\item Als deur A open staat, dan moet deur B dicht zijn en Vic versa.
\item Een deur mag pas open als de waterhoogte aan beide zijdes gelijk is.
\item Er kunnen maximaal X aantal boten wachten in de rij.
\item Als de watertemperatuur 0 graden celsius of lager is wordt het antivries mechanisme actief.
\item Er is maximaal maar één stoplicht op groen.
\item Deuren gaan alleen open of dicht als alle stoplichten op rood staan.


\end{itemize}

\vskip2cm


\clearpage %====================================================================
\section{Verificatie}
\begin{itemize}
\item We controleren of er geen deadlock in het systeem zit. Als dit wel het geval is kan het systeem vastlopen en is er menselijke interventie nodig om het probleem te verhelpen.
{\center A[ ] not deadlock.\\}
\vskip0.3cm

De uitkomst van deze verificatie is {\color{green}{groen}}. Dit betekend dat in het model zich geen deadlock bevindt.
\vskip0.5cm

\item Twee deuren mogen op geen enkel moment samen open zijn. Een contstante stroming van hoog naar laag is niet gewenst in een sluis. Hiervoor controleren we op de "'open"' states van beide deuren actief zijn. Daarnaast moet er gecontroleerd worden of er geen situatie bestaat waarin beide deuren tegelijk opengaan.
{\center 
A[ ] not (Door(0).Open == true \&\& Door(1).Open == true)\\
A[ ] not (Door(0).Opening == true \&\& Door(1).Opening == true)\\
}
\vskip0.3cm

Het resultaat van de twee querries is {\color{green}{groen}}. Er is dus geen situatie mogelijk waarin beide deuren open staan.

De querries hieronder zijn eigenlijk al deels bevestigd door de hierboven genoemde querries. Maar omdat een deur in de closing en opening state niet volledig gesloten hoeven te zijn moer er alsnog gecontroleerd worden of er een situatie is waarin een deur open gaat of sluit terwijl de ander niet volledig dicht is.
{\center
A[ ] not (Door(0).Opening == true \&\& Door(1).Open == true)\\
A[ ] not (Door(1).Opening == true \&\& Door(0).Open == true)\\
\vskip0.1cm
A[ ] not (Door(1).Opening == true \&\& Door(0).Closing == true)\\
A[ ] not (Door(0).Opening == true \&\& Door(1).Closing == true)\\
}
\vskip0.3cm

Als er een situatie zoals hierboven beschreven zou plaatsvinden, dan is de kans groot dat er twee open deuren zijn geweest of zullen volgen. Met de kennis eerder verkregen dat er geen moment is waar er twee deuren open zijn, is het geen verrassing dat de querries ook met een {\color{green}{groene}} status uit de verificatie komen.
\vskip0.5cm

\item Soort gelijken situaties kunnen we testen voor de stoplichten, zoals beide stoplichten op groen of oranje.
{\center
A[ ] not(TrafficLight(0).Green == true \&\& TrafficLight(1).Green == true)\\
A[ ] not(TrafficLight(0).Orange== true \&\& TrafficLight(1).Orange== true)\\

A[ ] not(TrafficLight(0).Green == true \&\& TrafficLight(1).Orange == true)\\
A[ ] not(TrafficLight(0).Orange == true \&\& TrafficLight(1).Green == true)\\
}
\vskip0.3cm
Deze verificatie geven aan of er niet aan beide kanten een boot toegelaten wordt. Ook deze verificatie zijn {\color{green}{groen}} afgesloten.
\vskip0.5cm

\item Het is belangrijk dat de stoplichten pas op groen gaan als de deur open is, vooral om schade te voorkomen. Dit wordt getest voor beide kanten van de sluis.
{\center
A[ ] not (TrafficLight(0).Green == true \&\& Door(0).Closed == true)\\
A[ ] not (TrafficLight(0).Orange == true \&\& Door(0).Closed == true)\\
\vskip0.1cm
A[ ] not (TrafficLight(1).Green == true \&\& Door(1).Closed == true)\\
A[ ] not (TrafficLight(1).Orange == true \&\& Door(1).Closed == true)\\
}
Het model volgt de volgorde eerst deur open, daarna de stoplichten aansturen, het is dan ook niet raar dat deze verificatie {\color{green}{groen}} is afgesloten.
\vskip0.5cm

\item Als een boot de sluis binnen gaat kan het niet zo zijn dat de boot de hoge en de lage kant als bestemming heeft. Hiervoor testen we of er een situatie is waarin de bestemming beide kanten is.
{\center
A[ ] not (Main.toHigh == true \&\& Main.toLow == true)\\
}
\vskip0.3cm

Deze verificatie is met {\color{green}{groen}} uit de verificatie gekomen.
\vskip0.5cm

\item Wanneer er een deur open is moet de pomp uistaan. Anders wordt er water bij of weggepompt met een open verbinding naar het kanaal, dat heeft geen zin en is een verspilling van energie.
{\center
A[ ] not (WaterPump.PumpIn == true \&\& !Door(0).Closed == true)\\
A[ ] not (WaterPump.PumpIn == true \&\& !Door(1).Closed == true)\\
\vskip0.2cm
A[ ] not (WaterPump.PumpInOut == true \&\& !Door(0).Closed == true)\\
A[ ] not (WaterPump.PumpInOut == true \&\& !Door(1).Closed == true)\\
}
\vskip0.3cm

Deze querries zijn met {\color{green}{groen}} uit de verificatie gekomen. Dat betekent dat de pompen altijd uit staan als er een open verbinding is met het water buiten de sluis. Ofwel als de pomp aan staat zijn de sluisdeuren altijd dicht.
\end{itemize}


\clearpage %====================================================================
\subsection{Liveness}
\begin{itemize}

\item Nadat de deuren zijn geopend moeten ze gesloten worden. Zodat derest van
de cyclus veilig kan verlopen. In de praktijk is de deur ook al open als hij op
een kier staat. Daarom wordt er gecontrolleerd op wanneer de deur niet meer
in zijn closed state staat.

{\center
Door(0).Open $\rightarrow$ Door.(0).Closed\\
Door(1).Open $\rightarrow$ Door.(1).Closed\\
}
\item Een schip dat de sluis in gaat moet de sluis verlaten. Dus als de "'activeBoatId"' 1 of hoger is dan moet hij uiteindelijk weer nul worden, ongeacht de richting waar de boot naartoe wilt.

{\center
(Main.activeBoatId != 0) $\rightarrow$ (Main.activeBoatId == 0)\\
}

\item Nadat de waterpomp is aangezet moet hij ook weer uitgaan zodat het water niet te hoog of te laag komt. Dus als hij uit de "'Idle"' state komt dan moet hij daar weer in terug komen.
{\center
!WaterPump.Idle() $\rightarrow$ WaterPump.Idle()
}

\end{itemize}

\clearpage %====================================================================
\section{\Large\color{red} \textbf{NEW MODEL HERSCHRIJVEN}}
\section{Ontwerpen} % Het model gemaakt in UPPAAL
In de beginsituatie van het model zijn alle deuren gesloten en staat het waterpeil gelijk aan het lage waterpeil in het kanaal. Het model heeft één hoofdcontroller. Deze hoofdcontroller maakt alle beslissingen en heeft het uiteindelijk voor het zeggen wat er moet gaan gebeuren.

Naast de hoofdcontroller zijn er nog een aantal modellen ontworpen ter ondersteuning van de hoofdcontroller. De onderdelen waarvan een model is gemaakt zijn: de deur, waterpomp, watersensor, boot/schip.


\vskip0.5cm

Het model van de deur heeft een heel simpel doel. Het moet aangeven of de deur open of dicht staat. Dit model heeft naast de "'open"' en "'dicht"' status ook een opening en closing status. Deze statussen geven aan dat de deur bezig is in een transitie van open naar dicht of andersom. tijdens deze transitie kunnen er bijvoorbeeld nog geen boten worden toegelaten.

\vskip0.5cm

Het waterpomp model heeft 3 statussen. Zijn begin status is de Sleep status. Hierin wacht de waterpomp op een signaal van de hoofdcontroller om te beginnen met het pompen van het water. Afhankelijk van het signaal dat de waterpomp ontvangt schakeld het over op "'WaterIn"' of "'WaterOut"'. Deze statussen pompen water in of uit de sluis, wat ervoor zorgt dat het waternieuwe wordt verhoogt.

Het watersensor model heeft een simpel doel. Het moet de hoogte van het waterpeil weergeven, zodat deze ook in ander modellen, met name de maincontroller, gebruikt kunnen worden.

Het laatste model is die van de boot. De naam is echter een beetje tegenstrijdig met de functie van dit model. Het boot model modelleert niet een schip of de acties daarvan. Dit model heeft als die de positie van het schip weergeven.



\clearpage %====================================================================
\begin{comment}
A watertight chamber connecting the upper and lower canals, and large enough to enclose one or more boats. The position of the chamber is fixed, but its water level can vary.\\
A gate (often a pair of "'pointing"' half-gates) at each end of the chamber. A gate is opened to allow a boat to enter or leave the chamber; when closed, the gate is watertight.\\
A set of lock gear to empty or fill the chamber as required. This is usually a simple valve (traditionally, a flat panel (paddle) lifted by manually winding a rack and pinion mechanism) which allows water to drain into or out of the chamber; larger locks may use pumps.
\end{comment}




\clearpage %====================================================================
\bibliography{references} % DIT ZIJN VOORBEELDEN
\begin{thebibliography}{9}
\bibitem{rijkswaterstaat2017}
Rijkswaterstaat (2017).
\textit{Richtlijnen Vaarwegen 2017}\\
% Editors. Publisher.

\end{thebibliography}

\end{document}


% book:
% author (release year). \textit{title}\\
% Editors. Publisher. 


% schutten het veranderen van water hoogte binnen de sluis